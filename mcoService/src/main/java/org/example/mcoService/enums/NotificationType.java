package org.example.mcoService.enums;

import lombok.Getter;
import lombok.RequiredArgsConstructor;

/**
 * Типы уведомлений для сервиса МЧО.
 * Все уведомления используют категорию GENERAL, так как сервис
 * предназначен для работы с чеками, а не кешбэком.
 *
 * Соответствует требованиям протокола МЧО (п. 3.4) об обязательной
 * реализации системы уведомлений для production-среды.
 */
@Getter
@RequiredArgsConstructor
public enum NotificationType {

    /**
     * Уведомление о получении новых чеков
     * Отправляется когда в системе появились новые чеки пользователя
     */
    NEW_RECEIPTS_AVAILABLE(
            "Новые чеки",
            "Получено {count} новых чеков на сумму {amount}₽",
            "Получено {count} новых чеков"
    ),

    /**
     * Ежемесячная статистика по чекам
     * Отправляется в начале месяца с итогами предыдущего
     */
    MONTHLY_STATISTICS(
            "Статистика за {month}",
            "В {month} получено {count} чеков на общую сумму {amount}₽. Средний чек: {average}₽",
            "Статистика за {month}: {count} чеков"
    ),

    /**
     * Напоминание об истечении срока хранения чеков
     * Чеки хранятся 5 дней, после чего удаляются
     */
    RECEIPTS_EXPIRING_SOON(
            "Чеки скоро будут удалены",
            "Чеки хранятся 5 дней. У вас есть непросмотренные чеки, которые скоро будут удалены. Скачайте их сейчас!",
            "Скачайте чеки до удаления"
    ),

    /**
     * Уведомление об успешном подключении к сервису
     * Отправляется после одобрения заявки на подключение
     */
    BINDING_COMPLETED(
            "Подключение завершено",
            "Вы успешно подключены к сервису Чек24. Теперь вы можете получать и скачивать свои чеки.",
            "Подключение к Чек24 завершено"
    ),

    /**
     * Напоминание о необходимости подтвердить заявку
     * Отправляется если заявка ожидает одобрения пользователем
     */
    BINDING_REMINDER(
            "Подтвердите заявку",
            "Для завершения подключения к сервису Чек24 подтвердите заявку в личном кабинете МЧО.",
            "Подтвердите заявку в МЧО"
    ),

    /**
     * Уведомление об обновлении сервиса
     * Отправляется при добавлении новых возможностей
     */
    SERVICE_UPDATE(
            "Обновление сервиса",
            "В сервисе Чек24 доступны новые возможности. Откройте приложение, чтобы узнать подробности.",
            "Доступны новые возможности"
    );

    /**
     * Заголовок уведомления (до 255 символов)
     * Может содержать плейсхолдеры для подстановки значений
     */
    private final String titleTemplate;

    /**
     * Полное сообщение уведомления (до 2048 символов, поддерживает Markdown)
     * Содержит плейсхолдеры типа {count}, {amount}, {month} для подстановки
     */
    private final String messageTemplate;

    /**
     * Короткое сообщение для PUSH-уведомлений (до 255 символов)
     * Может содержать плейсхолдеры для подстановки значений
     */
    private final String shortMessageTemplate;

    /**
     * Категория уведомления - всегда GENERAL для сервиса без кешбэка
     * @return "GENERAL"
     */
    public String getCategory() {
        return "GENERAL";
    }
}
